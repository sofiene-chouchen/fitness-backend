{"version":3,"sources":["../../../src/plugins/edge.ts"],"sourcesContent":["/*\n * @adonisjs/i18n\n *\n * (c) AdonisJS\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nimport type { PluginFn } from 'edge.js/types'\n\nimport debug from '../debug.js'\nimport type { I18n } from '../i18n.js'\nimport type { I18nManager } from '../i18n_manager.js'\n\n/**\n * The edge plugin for AdonisJS Session adds tags to read\n * flash messages\n */\nexport const edgePluginI18n: (i18n: I18nManager) => PluginFn<undefined> = (i18n) => {\n  debug('registering edge helpers')\n\n  return (edge) => {\n    /**\n     * Reference to i18n for the default locale. HTTP requests\n     * can share request specific instance with templates.\n     */\n    edge.global('i18n', i18n.locale(i18n.defaultLocale))\n\n    /**\n     * \"t\" global helper\n     */\n    edge.global(\n      't',\n      function (\n        this: { i18n: I18n },\n        identifier: string,\n        data?: Record<string, any>,\n        fallbackMessage?: string\n      ) {\n        return this.i18n.t(identifier, data, fallbackMessage)\n      }\n    )\n\n    /**\n     * Reference to the default locale\n     */\n    edge.global('getDefaultLocale', function () {\n      return i18n.defaultLocale\n    })\n\n    /**\n     * Reference to the list of supported locales\n     */\n    edge.global('getSupportedLocales', function () {\n      return i18n.supportedLocales()\n    })\n  }\n}\n"],"mappings":";;;;;AAmBO,IAAM,iBAA6D,CAAC,SAAS;AAClF,gBAAM,0BAA0B;AAEhC,SAAO,CAAC,SAAS;AAKf,SAAK,OAAO,QAAQ,KAAK,OAAO,KAAK,aAAa,CAAC;AAKnD,SAAK;AAAA,MACH;AAAA,MACA,SAEE,YACA,MACA,iBACA;AACA,eAAO,KAAK,KAAK,EAAE,YAAY,MAAM,eAAe;AAAA,MACtD;AAAA,IACF;AAKA,SAAK,OAAO,oBAAoB,WAAY;AAC1C,aAAO,KAAK;AAAA,IACd,CAAC;AAKD,SAAK,OAAO,uBAAuB,WAAY;AAC7C,aAAO,KAAK,iBAAiB;AAAA,IAC/B,CAAC;AAAA,EACH;AACF;","names":[]}